<section class="contact-page py-5">
  <div class="container">

    <div class="contact-card mx-auto p-4 shadow rounded-4">
      <h1 class="display-6 fw-bold mb-1 text-main">Contact us</h1>
      <p class="text-muted mb-4">Someone will get back to you within 24 hours. Promise.</p>

      <form class="contact-form" [formGroup]="contactForm" (ngSubmit)="submit()">

        <!-- Name + Email -->
        <div class="row g-4 mb-4">
          <div class="col-md-6">
            <label class="form-label fw-semibold" for="name">Name</label>
            <input id="name" type="text" class="form-control input-like" formControlName="name" />
            @if (contactForm.get('name')?.errors && (contactForm.get('name')?.touched || contactForm.get('name')?.dirty)) {
              <div class="alert alert-danger mt-2 mb-0">
                @if (contactForm.get('name')?.getError('required')) { <p class="m-0">* Name is required</p> }
                @else if (contactForm.get('name')?.getError('minlength')) { <p class="m-0">* Name should be at least 3 chars</p> }
              </div>
            }
          </div>

          <div class="col-md-6">
            <label class="form-label fw-semibold" for="email">Email</label>
            <div class="email-wrap">
              <input id="email" type="email" class="form-control input-like pe-5" formControlName="email" />
              <span class="email-icon">&#64;</span>
            </div>
            @if (contactForm.get('email')?.errors && (contactForm.get('email')?.touched || contactForm.get('email')?.dirty)) {
              <div class="alert alert-danger mt-2 mb-0">
                @if (contactForm.get('email')?.getError('required')) { <p class="m-0">* Email is required</p> }
                @else if (contactForm.get('email')?.getError('email')) { <p class="m-0">* Email is not valid</p> }
              </div>
            }
          </div>
        </div>

        <!-- Issue -->
        <div class="mb-4">
          <label class="form-label fw-semibold d-block mb-2">Issue</label>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="issue-box">
                <input type="radio" formControlName="issue" value="General inquiry" />
                <span class="radio-dot"></span>
                <span class="issue-text">General inquiry</span>
              </label>
            </div>
            <div class="col-md-6">
              <label class="issue-box">
                <input type="radio" formControlName="issue" value="Quote request" />
                <span class="radio-dot"></span>
                <span class="issue-text">Quote request</span>
              </label>
            </div>
            <div class="col-md-6">
              <label class="issue-box">
                <input type="radio" formControlName="issue" value="Feedback" />
                <span class="radio-dot"></span>
                <span class="issue-text">Feedback</span>
              </label>
            </div>
            <div class="col-md-6">
              <label class="issue-box">
                <input type="radio" formControlName="issue" value="Other" />
                <span class="radio-dot"></span>
                <span class="issue-text">Other</span>
              </label>
            </div>
          </div>
          @if (contactForm.get('issue')?.errors && contactForm.get('issue')?.touched) {
            <div class="alert alert-danger mt-2 mb-0 w-50">
              <p class="m-0">* Please choose an issue</p>
            </div>
          }
        </div>

        <!-- Message -->
        <div class="mb-4">
          <label class="form-label fw-semibold" for="message">Message</label>
          <textarea id="message" rows="5" class="form-control input-like" formControlName="message"></textarea>
          @if (contactForm.get('message')?.errors && (contactForm.get('message')?.touched || contactForm.get('message')?.dirty)) {
            <div class="alert alert-danger mt-2 mb-0">
              @if (contactForm.get('message')?.getError('required')) { <p class="m-0">* Message is required</p> }
              @else if (contactForm.get('message')?.getError('minlength')) { <p class="m-0">* Message should be at least 10 chars</p> }
            </div>
          }
        </div>

        <!-- Submit -->
        <button type="submit" class="submit-btn" [disabled]="contactForm.invalid || isLoading">
          Submit
          @if (isLoading) {
            <span class="ms-2"><i class="fas fa-spin fa-spinner"></i></span>
          }
        </button>

        @if (msgError) { <p class="alert alert-danger mt-3 mb-0">{{ msgError }}</p> }
        @if (msgSuccess) { <p class="alert alert-success mt-3 mb-0">{{ msgSuccess }}</p> }

      </form>
    </div>

  </div>
</section>
